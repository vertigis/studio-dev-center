"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[2419],{2866:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"web/api-components","title":"Components and Services","description":"VertiGIS Studio Web - Component and service configuration","source":"@site/docs/web/api-components.mdx","sourceDirName":"web","slug":"/web/api-components","permalink":"/docs/web/api-components","draft":false,"unlisted":false,"editUrl":"https://github.com/vertigis/studio-dev-center/edit/master/docs/web/api-components.mdx","tags":[],"version":"current","frontMatter":{"title":"Components and Services","description":"VertiGIS Studio Web - Component and service configuration"},"sidebar":"web","previous":{"title":"Argument Definition Reference","permalink":"/docs/web/api-argument-definitions"},"next":{"title":"API Object Reference","permalink":"/docs/web/api-objects"}}');var s=t(4848),r=t(8453),o=t(8038);const c={title:"Components and Services",description:"VertiGIS Studio Web - Component and service configuration"},a=void 0,d={},l=[];function p(e){const n={a:"a",admonition:"admonition",p:"p",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["Here is a detailed schema for JSON that can be used within ",(0,s.jsx)(n.a,{href:"/docs/web/configuration-app-config-getting-started",children:"App config"})," to configure components and services."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["Another way to discover the methods and configurable properties of built-in models and services is to explore the Typescript definitions using your IDE of choice. We recommend ",(0,s.jsx)(n.a,{href:"https://code.visualstudio.com/",children:"Visual Studio Code"}),"."]})}),"\n",(0,s.jsx)(o.A,{product:"web",type:"config"})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},8038:(e,n,t)=>{t.d(n,{A:()=>E});var i=t(8478),s=t(4531),r=t.n(s),o=t(6540),c=t(1107),a=t(11),d=t(5603),l=t(23),p=t(2540);function u(e){return e.replace("#/definitions/","")}function m(e,n="web"){if(!e||""===e)return;const t=u(e);return"Features"===t||"Feature"===t?"docs/web/api-objects#features":"FeatureSource"===t?"docs/web/api-objects#featuresource":t.endsWith("Extension")?"docs/web/api-objects#extensions":window?.location.href.includes("api-argument-definitions")?`#definition-${t}`:`docs/${n}/api-argument-definitions#definition-${t}`}function f(e){return m(e)?.split("#")[1]}function h(e,n){const t=u(e);if(!t.startsWith("viewer-spec.SingleCommand")&&!t.startsWith("viewer-spec.SingleOperation"))return n.definitions[t]}function g(e){const n=e.slice(),t=[],i=n.findIndex((e=>"@vertigis.arcgis-extensions.data.Feature.Feature"===e.$ref));i>=0&&(n.splice(i,1),t.push("Feature"));const s=n.findIndex((e=>"@vertigis.arcgis-extensions.data.FeatureSet.FeatureSet"===e.$ref));s>=0&&(n.splice(s,1),t.push("FeatureSet"));const r=n.findIndex((e=>"@vertigis.arcgis-extensions.data.FeatureList.FeatureList"===e.$ref));r>=0&&(n.splice(r,1),t.push("FeatureList"));const o=n.findIndex((e=>"@vertigis.arcgis-extensions.data.FeatureStream.FeatureStream"===e.$ref));o>=0&&(n.splice(o,1),t.push("FeatureStream"));return n.filter((e=>"array"===e.type)).forEach((e=>{const n=e?.items?.anyOf?.slice();if(n){const i=n.findIndex((e=>"@vertigis.arcgis-extensions.data.Feature.Feature"===e.$ref));i>=0&&(n?.splice(i,1),t.push("Feature[]")),e.items.anyOf=n}})),n.splice(i>=0?i:0,0,{$ref:`@vertigis.api-docs.Features ${t.join(", ")}`}),n}var j=t(6025),x=t(4848);const v=(e,n,t,i)=>(0,x.jsxs)("span",{children:[(0,x.jsx)("code",{children:n?(0,x.jsx)("a",{href:n,target:n.startsWith("http")?"_blank":"_self",onClick:()=>window.location.hash=i,children:e}):e}),t&&(0,x.jsx)("span",{className:"messaging-ref-type-name",children:t})]});function y(e){const{isArray:n,name:t,schema:i,linkId:s,product:r}=e,o=u(t),c=o.includes(" ")?o.split(/\s(.*)/)[1]:o,a=o.split(" ")[0].replace("/",".").split("."),d=a[a.length-1],l=h(t,i);if(l&&"object"===l.type)return v(n?`${d}[]`:d,(0,j.Ay)(m(t,r)),d!==c?c:void 0,s);if("Features"===d||"Feature"===d||"FeatureSource"===d||d.endsWith("Extension"))return v(n?`${d}[]`:d,(0,j.Ay)(m(d,r)),d!==c?c:void 0,s);if(c.startsWith("esri")&&!c.includes("rest-api")){const e=c.replace(".","/").split("/");return v(n?`${e[e.length-1]}[]`:e[e.length-1],`https://developers.arcgis.com/javascript/latest/api-reference/${e.join("-")}.html`,`@arcgis.core.${e.splice(1).join(".")}`,s)}return v(n?`${d}[]`:d,void 0,d!==c?c:void 0,s)}a.A.registerLanguage("javascript",d.A);const b=/{@link ?([\S\s]*?)}/,w=new RegExp(b,"g"),$=/([S|s]ee ?{@link ?)([\S\s]*?)}/,F=new l.Dz((0,p.x)({highlight:e=>a.A.highlight(e,{language:"javascript"}).value})),S=e=>(0,x.jsx)("span",{dangerouslySetInnerHTML:{__html:e.includes("|\n|")||e.includes("```")?F.parse(e,{async:!1,breaks:!0}):F.parseInline(e,{async:!1,breaks:!0})}});function k(e,n,t,i){let{description:s}=e;if(!s)return;const r=s.match(w);if(!r)return(0,x.jsx)("div",{className:t,children:S(s)});if(1===r.length&&s.toLocaleLowerCase().match($)){const r=s.toLocaleLowerCase().match($)?.[2],o=e.$ref?h(e.$ref,n):(e=>{if(e?.includes(".")){const t=e?.split(".")[0],i=e?.split(".")[1];return t&&i&&n.definitions[t]?.properties?.[i]}if(e)return n.definitions[e]})(r);return o?k(o,n,t,i):void 0}return(0,x.jsx)("div",{className:t,children:r.flatMap(((e,t)=>((e,t)=>{const o=s?.indexOf(e)??0,c=s?.slice(0,o),a=s?.slice(o),d=e?.match(b);let l=(d?.[1]??d?.[2])?.trim();l?.includes("!")&&(l=l.split("!")[1]);const p=l?.startsWith("http"),u=l&&n.definitions[l]?(0,j.Ay)(m(l,i)):p?l:void 0,f=u?(0,x.jsx)("a",{href:u,target:p?"_blank":"_self",children:l}):l;return s=a?.slice(e.length),0===t?1===r.length?[(0,x.jsx)("span",{children:S(c)}),(0,x.jsx)("code",{children:f}),(0,x.jsx)(x.Fragment,{children:S(a?.slice(e.length))})]:[(0,x.jsx)("span",{children:S(c)}),(0,x.jsx)("code",{children:f}),(0,x.jsx)(x.Fragment,{children:S(s?.slice(0,s?.indexOf(r[t+1])))})]:s?.length>0?t<r.length-1?[(0,x.jsx)("code",{children:f}),(0,x.jsx)(x.Fragment,{children:S(s?.slice(0,s?.indexOf(r[t+1])))})]:[(0,x.jsx)("code",{children:f}),(0,x.jsx)(x.Fragment,{children:S(a?.slice(e.length))})]:[(0,x.jsx)("code",{children:f})]})(e,t)))})}function A(e,n,t,i){return e.properties?(0,x.jsx)("div",{className:"margin-left--sm",children:Object.entries(e.properties).map((([s,r])=>(0,x.jsxs)("div",{className:"margin-bottom--md",children:[(0,x.jsx)("div",{className:"margin-bottom--sm",children:(0,x.jsxs)("div",{className:"property-name-and-badges",children:[(0,x.jsx)("div",{role:"heading","aria-level":4,className:"monospaceHeader",children:s}),e.required?.includes(s)&&(0,x.jsx)("span",{className:"badge badge--secondary",children:"Required"})]})}),(0,x.jsxs)("div",{className:"margin-left--sm",children:[(0,x.jsx)(O,{definition:r,schema:n,linkId:f(t),product:i}),k(r,n,"margin-top--sm",i)]})]},s)))}):null}function O(e){const{schema:n,linkId:t,product:i}=e;let s=e.definition;if("string"==typeof s){const e=h(s,n);console.warn("Couldn't find definition:",s),s=e}if(!s)return(0,x.jsx)("div",{style:{fontStyle:"italic"},children:"There are no arguments"});if(s.$ref){const e=h(s.$ref,n);return e&&"object"!==e.type?(0,x.jsx)(O,{definition:e,schema:n,linkId:t,product:i}):(0,x.jsx)(y,{name:s.$ref,schema:n,linkId:t,product:i})}if(s.type){if("string"===s.type&&s.enum){const e=s.enum.map((e=>`"${e}"`)).join(" | ");return(0,x.jsx)("code",{children:e})}if("array"===s.type&&s.items){const e=e=>(0,x.jsx)(x.Fragment,{children:e.map(((e,s)=>(0,x.jsx)("div",{children:(0,x.jsx)(y,{isArray:!0,name:e.$ref??"",schema:n,linkId:t,product:i})},`${e.$ref}-${s}`||s)))});if(Array.isArray(s.items))return e(s.items);if(Array.isArray(s.items.anyOf))return e(s.items.anyOf);if(s.items.$ref){const e=s.items.$ref;return(0,x.jsx)(y,{isArray:!0,name:e,schema:n,linkId:t,product:i})}return(0,x.jsxs)("code",{children:[s.items.type,"[]"]})}if("object"===s.type)return(e=>e.properties&&2===Object.keys(e.properties).length&&2===e.required?.length&&"name"===e.required[0]&&"arguments"===e.required[1])(s)?null:s.properties?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("code",{children:"object"}),A(s,n,t,i)]}):s.additionalProperties&&!0!==s.additionalProperties&&"string"===s.additionalProperties.type?(0,x.jsx)("code",{children:s.additionalProperties.enum?.map((e=>`"${e}"`)).join(" | ")}):(0,x.jsx)("code",{children:"object"});if(Array.isArray(s.type)){const e=s.type.filter((e=>"null"!==e));return 0===e.length?null:1===e.length?(0,x.jsx)("code",{children:e[0]}):(0,x.jsx)(x.Fragment,{children:e.map((e=>(0,x.jsx)("div",{children:(0,x.jsx)("code",{children:e})},e)))})}return(0,x.jsx)("code",{children:s.type})}if(s.anyOf){const e=s.anyOf.filter((e=>!("null"===e.type)));return(0,x.jsxs)(x.Fragment,{children:[e.length>1&&(0,x.jsx)("div",{children:"Any of:"}),e.map(((e,s)=>(0,x.jsx)("div",{children:(0,x.jsx)(O,{definition:e,schema:n,linkId:t,product:i})},`${e.$ref}-${s}`||s)))]})}return(0,x.jsx)("code",{children:"unknown"})}function I(e){return!!e.$ref}function C(e){return e?.type?.includes("null")||e?.anyOf?.some(C)}function N(e){const{schema:n,type:t,product:i}=e,s=n.definitions;let r;r="command"===t?"viewer-spec.SingleCommand":"operation"===t?"viewer-spec.SingleOperation":"viewer-spec.Event";const o=s[r]?.anyOf?.filter(I).map((e=>u(e.$ref)));return o?(0,x.jsx)(x.Fragment,{children:o.map((e=>{const r=s[e],o=function(e,n){return`${n}-${e}`}(e,t),a=s[`${e}:input`],d=s[`${e}:output`];return r?(0,x.jsxs)("div",{className:"margin-bottom--lg",children:[(0,x.jsx)(c.A,{as:"h2",id:o,children:e}),k(r,n,"margin-bottom--md",i),(0,x.jsxs)("div",{className:"margin-bottom--md",children:[(0,x.jsx)("h3",{children:"Argument "+(!0===C(a)?"(optional)":"")}),(0,x.jsx)("div",{className:"margin-left--sm",children:(0,x.jsx)(O,{definition:a,schema:n,linkId:o,product:i})})]}),"operation"===t&&d&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{children:"Result"}),(0,x.jsx)("div",{className:"margin-left--sm",children:(0,x.jsx)(O,{definition:d,schema:n,linkId:o,product:i})})]})]},e):null}))}):null}function L(e){const{definitionName:n,schema:t,product:i}=e,s=u(n),r=s.replace("/",".").split("."),o=r[r.length-1],a=h(n,t);if(!a)return null;if("object"!==a.type)return console.warn("Tried to render definition for non-object type",s),null;const d=f(s);return(0,x.jsxs)("div",{className:"margin-bottom--lg",children:[(0,x.jsxs)("span",{children:[(0,x.jsx)(c.A,{as:"h2",id:d,children:o}),o!==s&&(0,x.jsx)("h5",{className:"messaging-definition-subheader",children:s})]}),k(a,t,"margin-bottom--md",i),(0,x.jsx)("h3",{children:"Properties"}),(!a.properties||0===Object.keys(a.properties).length)&&(0,x.jsx)("em",{children:"This object doesn't currently contain any properties."}),a.properties&&A(a,t,s,i)]})}function W(e){const{schema:n,product:t,type:i}=e,s=Object.entries(n.definitions).reduce(((e,[n,t])=>"object"===t.type?{...e,[n]:t}:e),{});return(0,x.jsx)("div",{children:Object.keys(s).filter((e=>"argument"===i?!e.toLocaleLowerCase().includes("modelproperties")&&!e.toLocaleLowerCase().endsWith(":input")&&!e.toLocaleLowerCase().endsWith(":output"):e.toLocaleLowerCase().includes("modelproperties"))).sort(((e,n)=>e.localeCompare(n))).map((e=>(0,x.jsx)(L,{definitionName:e,schema:n,product:t},e)))})}function _(e){const{schema:n,type:t,product:i}=e;return(0,x.jsxs)(x.Fragment,{children:[("argument"===t||"config"===t)&&(0,x.jsx)(W,{schema:n,product:i,type:t}),"command"===t&&(0,x.jsx)(N,{schema:n,type:"command",product:i}),"event"===t&&(0,x.jsx)(N,{schema:n,type:"event",product:i}),"operation"===t&&(0,x.jsx)(N,{schema:n,type:"operation",product:i})]})}function E(e){return(0,x.jsx)(i.A,{children:()=>(0,x.jsx)(q,{...e})})}const T={web:{action:void 0,event:void 0,config:void 0},mobile:{action:void 0,event:void 0,config:void 0},common:{action:void 0,event:void 0,config:void 0}},R=async(e,n)=>{let t;try{t=r().get(`${e}-${n}`)}catch(i){console.log(i)}if(!t){if(!T[e][n]){const t="config"===n?"app-config":n;T[e][n]=fetch(`https://apps.vertigisstudio.com/web/${e}-${t}.schema.json`)}const s=await T[e][n];if(t=await(s?.clone().json()),t)try{r().set(`${e}-${n}`,t,1440)}catch(i){console.error(i)}}return t};function q(e){const{product:n,type:t}=e,[i,s]=(0,o.useState)();return(0,o.useEffect)((()=>{let e,i=!1;switch(t){case"command":case"operation":e="action";break;case"event":e="event";break;case"argument":case"config":e="config"}return(async()=>{if(!e)return;let r,o,c,a;"config"===e&&(r=await R("common","config"),o=await R(n,"config")),"action"!==e&&"config"!==e||(c=await R(n,"action")),"event"!==e&&"config"!==e||(a=await R(n,"event"));const d=[];if(r&&d.push(r),o&&d.push(o),c&&d.push(c),a&&d.push(a),i)return;const l={$ref:"#/definitions/viewer-spec.ActionObject"},p={type:"string"},u={definitions:"config"!==t?{"viewer-spec.ActionObject":{properties:{name:{description:"The name of a command or operation.",type:"string"},arguments:{description:"The arguments for the command or operation.",type:"object"}},required:["name","arguments"],type:"object"},"viewer-spec.Action":{description:`An action to execute in the viewer; can be an action name, an action object, or a command chain (https://developers.vertigisstudio.com/docs/${n}/configuration-commands-operations/#command-chains). The list of valid action names are the names of the commands and operations listed in this document`,anyOf:[p,l,{items:{anyOf:[p,l]},type:"array"}]}}:{}};d.forEach((e=>{Object.keys(e.definitions).forEach((n=>{u.definitions[n]=function(e){if(!e)return!1;const n=e.map((e=>e.$ref));return!!(n.includes("@vertigis.arcgis-extensions.data.Feature.Feature")||n.includes("@vertigis.arcgis-extensions.data.FeatureSet.FeatureSet")||n.includes("@vertigis.arcgis-extensions.data.FeatureList.FeatureList")||n.includes("@vertigis.arcgis-extensions.data.FeatureStream.FeatureStream"))}(e.definitions[n].anyOf)?{...e.definitions[n],anyOf:g(e.definitions[n].anyOf)}:e.definitions[n]}))})),s(u)})(),()=>{i=!0}}),[n]),(0,o.useEffect)((()=>{if(!i)return;const e=window.decodeURIComponent(window.location.hash);e&&document.getElementById(e.substring(1))?.scrollIntoView()}),[i]),i?(0,x.jsx)(_,{schema:i,type:t,product:n}):(0,x.jsx)("div",{children:"Loading..."})}}}]);