"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[8720,3988],{4676:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>d,frontMatter:()=>i,metadata:()=>a,toc:()=>c});var r=n(7624),o=n(2172);const i={},s=void 0,a={id:"workflow/snippets/prereqs-web",title:"prereqs-web",description:"Follow the instructions in the Web Applications SDK page to set up your development environment.",source:"@site/docs/workflow/snippets/prereqs-web.mdx",sourceDirName:"workflow/snippets",slug:"/workflow/snippets/prereqs-web",permalink:"/docs/workflow/snippets/prereqs-web",draft:!1,unlisted:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/workflow/snippets/prereqs-web.mdx",tags:[],version:"current",frontMatter:{}},l={},c=[];function u(e){const t={a:"a",admonition:"admonition",p:"p",...(0,o.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Follow the instructions in the ",(0,r.jsx)(t.a,{href:"/docs/workflow/sdk-web-overview",children:"Web Applications SDK"})," page to set up your development environment."]}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)(t.p,{children:["A working knowledge of ",(0,r.jsx)(t.a,{href:"https://www.typescriptlang.org/",children:"TypeScript"})," is recommended before extending Workflow for web-based hosts."]})})]})}function d(e={}){const{wrapper:t}={...(0,o.M)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},9068:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>m,contentTitle:()=>u,default:()=>f,frontMatter:()=>c,metadata:()=>d,toc:()=>h});var r=n(7624),o=n(2172),i=n(964),s=n(4676),a=n(1268),l=n(5388);const c={title:"Implement a Star Rating Custom Form Element",description:"VertiGIS Studio Workflow - Implement a star rating form element for web applications"},u=void 0,d={id:"workflow/tutorial-web-implement-star-rating-form-element",title:"Implement a Star Rating Custom Form Element",description:"VertiGIS Studio Workflow - Implement a star rating form element for web applications",source:"@site/docs/workflow/tutorial-web-implement-star-rating-form-element.mdx",sourceDirName:"workflow",slug:"/workflow/tutorial-web-implement-star-rating-form-element",permalink:"/docs/workflow/tutorial-web-implement-star-rating-form-element",draft:!1,unlisted:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/workflow/tutorial-web-implement-star-rating-form-element.mdx",tags:[],version:"current",frontMatter:{title:"Implement a Star Rating Custom Form Element",description:"VertiGIS Studio Workflow - Implement a star rating form element for web applications"},sidebar:"workflow",previous:{title:"Implement an activity that creates a QR Code image using a Third Party Library",permalink:"/docs/workflow/tutorial-web-qr-code-activity"},next:{title:"Implement a Star Rating Custom Form Element using a Third Party Library",permalink:"/docs/workflow/tutorial-web-implement-third-party-star-rating-form-element"}},m={},h=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Overview",id:"overview",level:2},{value:"Set up the Custom Form Element Skeleton",id:"set-up-the-custom-form-element-skeleton",level:2},{value:"Build the Star Rating UI",id:"build-the-star-rating-ui",level:2},{value:"Add Interactivity and Expose the Form Element&#39;s Value",id:"add-interactivity-and-expose-the-form-elements-value",level:2},{value:"Deploy the Activity",id:"deploy-the-activity",level:2},{value:"Test the Activity",id:"test-the-activity",level:2}];function p(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Implementing a custom ",(0,r.jsx)(t.a,{href:"/docs/workflow/key-concepts#form-elements",children:"form element"})," allows you to augment the existing ",(0,r.jsx)(t.a,{href:"https://docs.vertigisstudio.com/workflow/latest/help/Default.htm#wf5/help/form-elements/auto-complete.htm%3FTocPath%3DForms%7CForm%2520Element%2520Reference%7C_____0",children:"form elements that come with VertiGIS Studio Workflow"}),"."]}),"\n",(0,r.jsx)(t.p,{children:"This article will walk you through creating a form element for rating that allows you to select up to five stars."}),"\n",(0,r.jsx)("img",{src:(0,i.c)("img/workflow-web-custom-star-rating.png")}),"\n",(0,r.jsx)(t.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(s.default,{}),"\n",(0,r.jsxs)(t.p,{children:["Custom workflow form elements are built in TypeScript and ",(0,r.jsx)(t.a,{href:"https://reactjs.org/",children:"React"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsx)(t.p,{children:"Implementing a custom form element for web applications just involves creating the custom form element and implementing the UI."}),"\n",(0,r.jsx)(t.h2,{id:"set-up-the-custom-form-element-skeleton",children:"Set up the Custom Form Element Skeleton"}),"\n",(0,r.jsx)(t.p,{children:"To create a new form element:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Open the Workflow activity SDK in Visual Studio Code."}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Run ",(0,r.jsx)(t.code,{children:"npm run generate"})," in the terminal."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["When prompted, select ",(0,r.jsx)(t.code,{children:"Form Element"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Enter the name of the form element you would like to create and press ",(0,r.jsx)(t.code,{children:"Enter"}),". For example, ",(0,r.jsx)(t.code,{children:"StarRating"}),"."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Open the newly created ",(0,r.jsx)(t.code,{children:"src/elements/StarRating.tsx"})," file."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsxs)(t.p,{children:["Create a new file ",(0,r.jsx)(t.code,{children:"StarRating.tsx"})," in the activity SDK."]}),"\n"]}),"\n",(0,r.jsxs)(t.li,{children:["\n",(0,r.jsx)(t.p,{children:"Create a skeleton React form element."}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",metastring:'title="src/elements/StarRating.tsx"',children:'import * as React from "react";\nimport {\n    FormElementProps,\n    FormElementRegistration,\n} from "@vertigis/workflow";\n\ninterface StarRatingProps extends FormElementProps<number> {}\n\nfunction StarRating(props: StarRatingProps): React.ReactElement {\n    return <div>Hello. Is it me you\'re looking for.</div>;\n}\n\nconst StarRatingElementRegistration: FormElementRegistration<StarRatingProps> =\n    {\n        component: StarRating,\n        getInitialProperties: () => ({ value: 0 }),\n        id: "StarRating",\n    };\n\nexport default StarRatingElementRegistration;\n'})}),"\n",(0,r.jsx)(t.h2,{id:"build-the-star-rating-ui",children:"Build the Star Rating UI"}),"\n",(0,r.jsx)(t.p,{children:"Next, we are going to build the form element to display the five stars the user can select. Form Elements are just React elements, and use React patterns to define their UI."}),"\n",(0,r.jsx)(t.p,{children:"First, let's build the star DOM elements."}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",metastring:'title="src/elements/StarRating.tsx"',children:'import * as React from "react";\nimport {\n    FormElementProps,\n    FormElementRegistration,\n} from "@vertigis/workflow";\n\ninterface StarRatingProps extends FormElementProps<number> {}\n\nfunction StarRating(props: StarRatingProps): React.ReactElement {\n    const rating = 5;\n\n    // Button style to show only the button content.\n    const baseStyle: React.CSSProperties = {\n        background: "none",\n        border: "none",\n        outline: "none",\n        fontSize: "2em",\n        padding: 0,\n    };\n\n    // Button styles to show selected and unselected states.\n    const selectedStyle = { ...baseStyle, ...{ color: "#ffa91b" } };\n    const unselectedStyle = { ...baseStyle, ...{ color: "#c6c6c6" } };\n\n    // Create 5 buttons\n    const buttons: JSX.Element[] = [];\n    for (let i = 1; i <= 5; i++) {\n        buttons.push(\n            <button\n                value={i}\n                style={rating < i ? unselectedStyle : selectedStyle}\n            >\n                \u2605\n            </button>\n        );\n    }\n\n    return <div>{buttons}</div>;\n}\n\nconst StarRatingElementRegistration: FormElementRegistration<StarRatingProps> =\n    {\n        component: StarRating,\n        getInitialProperties: () => ({ value: 0 }),\n        id: "StarRating",\n    };\n\nexport default StarRatingElementRegistration;\n'})}),"\n",(0,r.jsx)(t.h2,{id:"add-interactivity-and-expose-the-form-elements-value",children:"Add Interactivity and Expose the Form Element's Value"}),"\n",(0,r.jsx)(t.p,{children:"Next, we are going to add interactivity to the form element to show how many stars the user has selected."}),"\n",(0,r.jsxs)(a.c,{defaultValue:"custom-form-element",values:[{label:"Star Rating Form Element",value:"custom-form-element"},{label:"User Interface",value:"ui"}],children:[(0,r.jsx)(l.c,{value:"custom-form-element",children:(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",metastring:'title="src/elements/StarRating.tsx"',children:'import * as React from "react";\nimport {\n    FormElementProps,\n    FormElementRegistration,\n} from "@vertigis/workflow";\n\ninterface StarRatingProps extends FormElementProps<number> {}\n    // highlight-start\n    const { setValue, value } = props;\n\n    const handleClick = (event) => {\n        // Get the value from the button.\n        // Parse as an integer because the value is a string in the event.\n        const newValue = parseInt(event.target.value);\n\n        if (value !== newValue) {\n            // Update the element\'s value.\n            setValue(newValue);\n        }\n    };\n    // highlight-end\n\n    // Button style to show only the button content.\n    const baseStyle: React.CSSProperties = {\n        background: "none",\n        border: "none",\n        outline: "none",\n        fontSize: "2em",\n        padding: 0,\n    };\n\n    // Button styles to show selected and unselected states.\n    const selectedStyle = { ...baseStyle, ...{ color: "#ffa91b" } };\n    const unselectedStyle = { ...baseStyle, ...{ color: "#c6c6c6" } };\n\n    // Create 5 buttons\n    const buttons: JSX.Element[] = [];\n    for (let i = 1; i <= 5; i++) {\n        buttons.push(\n            <button\n                // highlight-start\n                onClick={handleClick}\n                // highlight-end\n                value={i}\n                style={value < i ? unselectedStyle : selectedStyle}\n            >\n                \u2605\n            </button>\n        );\n    }\n\n    return <div>{buttons}</div>;\n}\n\nconst StarRatingElementRegistration: FormElementRegistration<StarRatingProps> =\n    {\n        component: StarRating,\n        getInitialProperties: () => ({ value: 0 }),\n        id: "StarRating",\n    };\n\nexport default StarRatingElementRegistration;\n'})})}),(0,r.jsx)(l.c,{value:"ui",children:(0,r.jsx)("img",{src:(0,i.c)("img/workflow-web-custom-star-rating.png")})})]}),"\n",(0,r.jsx)(t.h2,{id:"deploy-the-activity",children:"Deploy the Activity"}),"\n",(0,r.jsxs)(t.p,{children:["Follow the instructions to ",(0,r.jsx)(t.a,{href:"/docs/workflow/sdk-web-overview#deployment",children:"build and deploy the activity pack"}),"."]}),"\n",(0,r.jsx)(t.h2,{id:"test-the-activity",children:"Test the Activity"}),"\n",(0,r.jsx)(t.p,{children:"Once your activity pack is hosted and registered, your custom form element should appear in the form element toolbox in VertiGIS Studio Workflow Designer alongside the built-in form elements, and can be used in the graphical interface like any other form element."}),"\n",(0,r.jsx)(t.admonition,{type:"note",children:(0,r.jsxs)("p",{children:[(0,r.jsx)(t.p,{children:"You can"}),(0,r.jsxs)("a",{href:(0,i.c)("workflows/web-custom-form-element.json"),download:"custom-form-element.json",target:"_blank",children:[" ",(0,r.jsxs)(t.p,{children:["download this demo workflow"," "]})]}),(0,r.jsx)(t.p,{children:"that registers and displays the custom form element and then"}),(0,r.jsxs)("a",{href:"https://docs.vertigisstudio.com/workflow/latest/help/Default.htm#wf5/help/import-export-workflows.htm",target:"_blank",children:[" ",(0,r.jsxs)(t.p,{children:["import it into the VertiGIS Studio Workflow Designer."," "]})]}),(0,r.jsxs)(t.p,{children:["You will have to"," "]}),(0,r.jsxs)("a",{href:(0,i.c)("docs/workflow/sdk-web-overview#host-the-activity-pack"),children:[" ",(0,r.jsx)(t.p,{children:"deploy the custom activity and form element"})]})," ",(0,r.jsxs)(t.p,{children:["for it to function. This workflow assumes you are hosting the\nactivity pack with the dev server on ",(0,r.jsx)(t.a,{href:"https://localhost:57999/",children:"https://localhost:57999/"}),"."]})]})}),"\n",(0,r.jsx)("img",{src:(0,i.c)("img/workflow-web-custom-form-element-basic.png")})]})}function f(e={}){const{wrapper:t}={...(0,o.M)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(p,{...e})}):p(e)}},5388:(e,t,n)=>{n.d(t,{c:()=>s});n(1504);var r=n(4064);const o={tabItem:"tabItem_Ymn6"};var i=n(7624);function s({children:e,hidden:t,className:n}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.c)(o.tabItem,n),hidden:t,children:e})}},1268:(e,t,n)=>{n.d(t,{c:()=>j});var r=n(1504),o=n(4064),i=n(3943),s=n(5592),a=n(5288),l=n(632),c=n(7128),u=n(1148);function d(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function m(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return d(e).map((({props:{value:e,label:t,attributes:n,default:r}})=>({value:e,label:t,attributes:n,default:r})))}(n);return function(e){const t=(0,c.w)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h({value:e,tabValues:t}){return t.some((t=>t.value===e))}function p({queryString:e=!1,groupId:t}){const n=(0,s.Uz)(),o=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,l._M)(o),(0,r.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(n.location.search);t.set(o,e),n.replace({...n.location,search:t.toString()})}),[o,n])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:o}=e,i=m(e),[s,l]=(0,r.useState)((()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=t.find((e=>e.default))??t[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:t,tabValues:i}))),[c,d]=p({queryString:n,groupId:o}),[f,g]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,o]=(0,u.IN)(t);return[n,(0,r.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:o}),w=(()=>{const e=c??f;return h({value:e,tabValues:i})?e:null})();(0,a.c)((()=>{w&&l(w)}),[w]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),g(e)}),[d,g,i]),tabValues:i}}var g=n(3664);const w={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=n(7624);function b({className:e,block:t,selectedValue:n,selectValue:r,tabValues:s}){const a=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.MV)(),c=e=>{const t=e.currentTarget,o=a.indexOf(t),i=s[o].value;i!==n&&(l(t),r(i))},u=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const n=a.indexOf(e.currentTarget)+1;t=a[n]??a[0];break}case"ArrowLeft":{const n=a.indexOf(e.currentTarget)-1;t=a[n]??a[a.length-1];break}}t?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.c)("tabs",{"tabs--block":t},e),children:s.map((({value:e,label:t,attributes:r})=>(0,v.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>a.push(e),onKeyDown:u,onClick:c,...r,className:(0,o.c)("tabs__item",w.tabItem,r?.className,{"tabs__item--active":n===e}),children:t??e},e)))})}function x({lazy:e,children:t,selectedValue:n}){const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=o.find((e=>e.props.value===n));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==n})))})}function y(e){const t=f(e);return(0,v.jsxs)("div",{className:(0,o.c)("tabs-container",w.tabList),children:[(0,v.jsx)(b,{...e,...t}),(0,v.jsx)(x,{...e,...t})]})}function j(e){const t=(0,g.c)();return(0,v.jsx)(y,{...e,children:d(e.children)},String(t))}},2172:(e,t,n)=>{n.d(t,{I:()=>a,M:()=>s});var r=n(1504);const o={},i=r.createContext(o);function s(e){const t=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),r.createElement(i.Provider,{value:t},e.children)}}}]);