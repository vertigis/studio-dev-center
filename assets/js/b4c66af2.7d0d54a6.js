"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[8464,2464],{6204:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>p,default:()=>f,frontMatter:()=>u,metadata:()=>m,toc:()=>v});var i=t(7624),r=t(2172),s=t(964),o=t(7528),a=t(7160),c=t(1268),l=t(5388),d=t(76);const u={title:"Service Reference",description:"VertiGIS Studio Mobile - Service reference"},p=void 0,m={id:"mobile/sdk-services-reference",title:"Service Reference",description:"VertiGIS Studio Mobile - Service reference",source:"@site/docs/mobile/sdk-services-reference.mdx",sourceDirName:"mobile",slug:"/mobile/sdk-services-reference",permalink:"/docs/mobile/sdk-services-reference",draft:!1,unlisted:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/mobile/sdk-services-reference.mdx",tags:[],version:"current",frontMatter:{title:"Service Reference",description:"VertiGIS Studio Mobile - Service reference"},sidebar:"mobile",previous:{title:"Create a Service",permalink:"/docs/mobile/sdk-services-create"},next:{title:"Overview",permalink:"/docs/mobile/sdk-events-overview"}},h={},v=[{value:"Service Registration",id:"service-registration",level:2},{value:"Service Lifecycle",id:"service-lifecycle",level:2},{value:"Initialization and Teardown",id:"initialization-and-teardown",level:2},{value:"Dependency Injection",id:"dependency-injection",level:2},{value:"Configuration Models",id:"configuration-models",level:2},{value:"Relevant SDK Samples",id:"relevant-sdk-samples",level:2},{value:"Next Steps",id:"next-steps",level:2}];function g(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.M)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Services act as a repository of accessible behavior and data, and can be used for a variety of purposes, from implementing commands and operations, to managing shared data, to interfacing with the REST API of an external service."}),"\n",(0,i.jsx)(n.h2,{id:"service-registration",children:"Service Registration"}),"\n",(0,i.jsxs)(n.p,{children:["All services need to be registered with VertiGIS Studio Mobile. A service is created by extending the ",(0,i.jsx)(n.code,{children:"ServiceBase"})," class and registering the service class with Autofac through an assembly attribute."]}),"\n",(0,i.jsx)(d.default,{}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cs",children:"// highlight-next-line\n[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    // highlight-next-line\n    class CustomService : ServiceBase\n    {\n        ...\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"service-lifecycle",children:"Service Lifecycle"}),"\n",(0,i.jsx)(n.p,{children:"On application load, all services that have been registered with wih VertiGIS Studio Mobile are first created and then initialized."}),"\n",(0,i.jsxs)(n.p,{children:["Services are destroyed (i.e. the ",(0,i.jsx)(n.code,{children:"_onDestroy"})," method is invoked) when the application is destroyed, e.g. when killing the application or switching applications in VertiGIS Studio Go."]}),"\n",(0,i.jsx)(n.h2,{id:"initialization-and-teardown",children:"Initialization and Teardown"}),"\n",(0,i.jsx)(n.p,{children:"Services have an initialization method, which can be used to perform asynchronous startup logic, and a teardown method, which can be used to free resources when the application is destroyed."}),"\n",(0,i.jsx)(n.admonition,{title:"Important",type:"info",children:(0,i.jsxs)(n.p,{children:["Always call ",(0,i.jsx)(n.code,{children:"base.Dispose(disposing)"})," when overriding the ",(0,i.jsx)(n.code,{children:"Dispose"})," method. ",(0,i.jsx)(n.code,{children:"ServiceBase"})," already implements ",(0,i.jsx)(n.code,{children:"IDisposable"})," and ",(0,i.jsx)(n.code,{children:"IDisposableTracker"}),", so only override the ",(0,i.jsx)(n.code,{children:"Dispose"})," method if you have created new managed resources which need to be cleaned up."]})}),"\n",(0,i.jsxs)(n.p,{children:["To learn more about memory management in VertiGIS Studio Mobile, check out ",(0,i.jsx)(n.a,{href:"/docs/mobile/sdk-memory-leaks",children:"this article"}),", and the ",(0,i.jsx)(n.a,{href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Conceptual/Disposal",children:"relevant SDK sample"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cs",children:"[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    class CustomService : ServiceBase\n    {\n        private bool disposed = false;\n\n        public CustomService()\n            : base()\n        {\n            // On creation logic here\n\n        }\n        protected override async Task DoInitialize()\n        {\n            // Async on initialization logic here\n            return;\n        }\n\n        protected override void Dispose(bool disposing)\n        {\n            if (disposed)\n            {\n                return;\n            }\n\n            if (disposing)\n            {\n                // Clean up managed resources.\n                // ...\n            }\n\n            // Clean up unmanaged resources.\n            // ...\n\n            // highlight-next-line\n            base.Dispose(disposing);\n\n            disposed = true;\n        }\n\n\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"dependency-injection",children:"Dependency Injection"}),"\n",(0,i.jsx)(n.p,{children:"Services interact with the larger application by injecting their dependencies. Services can inject commands and operations, other services, and any other class registered with Autofac."}),"\n",(0,i.jsx)(n.p,{children:"The following example injects the UI operations and the dialog controller into a custom service."}),"\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["Services are not intended to directly interact with each other. Instead, services should ",(0,i.jsx)(n.a,{href:"/docs/mobile/sdk-commands-operations#implementing-commands-and-operations",children:"implement operations"})," which can be called by other services to indirectly interact."]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cs",children:"[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    class CustomService : ServiceBase\n    {\n        private UIOperations _uiOperations;\n        private IDialogController _dialogController;\n\n        public CustomService(UIOperations uiOperations, IDialogController dialogController)\n            : base()\n        {\n            _uiOperations = uiOperations;\n            _dialogController = dialogController;\n        }\n        ...\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"configuration-models",children:"Configuration Models"}),"\n",(0,i.jsxs)(n.p,{children:["Like components, services can be configured through the ",(0,i.jsx)(n.a,{href:"/docs/mobile/configuration-app-config-getting-started",children:"app config"}),". Services can participate in the app config by creating and injecting the appropriate ",(0,i.jsx)(n.a,{href:"/docs/mobile/configuration-app-config-reference#app-items",children:(0,i.jsx)(n.strong,{children:"item type"})}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["Each item type in the application is bound to a class ",(0,i.jsxs)(n.a,{href:"/docs/mobile/sdk-dependency-injection#appitem",children:["registered as an ",(0,i.jsx)(n.code,{children:"AppItem"})," with autofac"]}),". This class instantiates itself with values from the app config in its constructor, acting as a configuration model."]}),"\n",(0,i.jsxs)(n.p,{children:["A service can consume configuration by injecting the ",(0,i.jsx)(n.code,{children:"AppItem"})," class as a dependency in its constructor."]}),"\n",(0,i.jsxs)(c.c,{defaultValue:"service",values:[{label:"Service Configuration Model",value:"model"},{label:"Service",value:"service"},{label:"App Config",value:"config"}],children:[(0,i.jsx)(l.c,{value:"service",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cs",children:"[assembly: Service(typeof(CustomService), PropertiesAutowired = true)]\nnamespace App1.Services\n{\n    class CustomService : ServiceBase\n    {\n        private IAppItem<CustomServiceSettings> _appItem;\n\n        public CustomService(IAppItem<CustomServiceSettings> appItem)\n            : base()\n        {\n            _appItem = appItem;\n        }\n        protected override async Task DoInitialize()\n        {\n            // highlight-start\n            var settings = await _appItem.ResolveAsync();\n            if (settings == null)\n            {\n                return;\n            }\n\n            Logger.Debug($\"Value of setting is '{settings.SomeSetting}'\");\n            // highlight-end\n        }\n    }\n}\n"})})}),(0,i.jsx)(l.c,{value:"model",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-cs",children:'// highlight-next-line\n[assembly: AppItem(CustomServiceSettings.AppItemType, typeof(CustomServiceSettings))]\nnamespace App1.Services\n{\n    // highlight-next-line\n    [ServiceAppItem(AppItemType)]\n    public class CustomServiceSettings\n    {\n        // highlight-next-line\n        public const string AppItemType = "custom-service";\n\n        public string SomeSetting { get; set; }\n\n        public CustomServiceSettings()\n        {\n        }\n\n        public CustomServiceSettings(Properties properties)\n        {\n            // highlight-start\n            if (properties is null)\n            {\n                throw new System.ArgumentNullException(nameof(properties));\n            }\n\n            if (properties.TryGetValue("someSetting", out string someSetting))\n            {\n                SomeSetting = someSetting;\n            }\n            // highlight-end\n        }\n    }\n}\n'})})}),(0,i.jsx)(l.c,{value:"config",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n    "schemaVersion": "1.0",\n\n    "items": [\n        ...{\n            "$type": "custom-service",\n            "id": "custom-service",\n            "someSetting": "Some Value"\n        }\n    ]\n}\n'})})})]}),"\n",(0,i.jsx)(n.h2,{id:"relevant-sdk-samples",children:"Relevant SDK Samples"}),"\n",(0,i.jsx)(n.p,{children:"Check out the relevant VertiGIS Studio Mobile SDK Samples:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Custom/Service",children:"Custom Service"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/CustomSamples/BasemapToggle",children:"Basemap Toggle that uses a Custom Service"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/geocortex/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/CustomSamples/BreadCrumbs",children:"Breadcrumb Tracker that Uses a Custom Service"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(a.c,{children:[(0,i.jsx)(o.c,{title:"Learn how to use Commands and Operations with Services",description:"Learn how to run and implement commands and operations with custom services",link:(0,s.c)("docs/mobile/sdk-commands-operations")}),(0,i.jsx)(o.c,{title:"Learn about Service Interactions",description:"Learn about how services and components can interact",link:(0,s.c)("docs/mobile/sdk-component-service-interactions")}),(0,i.jsx)(o.c,{title:"Build a Custom Command with a Custom Service",description:"Follow a step by step guide to building a custom command with a custom service",link:(0,s.c)("docs/mobile/tutorial-implement-command-operation")}),(0,i.jsx)(o.c,{title:"Build a Service that Manages Dynamic Data",description:"Built a service that manages a dynamic data source and exposes it to components",link:(0,s.c)("docs/mobile/tutorial-implement-service-fetch-dynamic-data")})]})]})}function f(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}},76:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>l});var i=t(7624),r=t(2172);const s={},o=void 0,a={id:"snippets/autofac-mobile",title:"autofac-mobile",description:"VertiGIS Studio Mobile uses Autofac to register, locate, and inject components, services and other classes. See dependency injection for more info.",source:"@site/docs/snippets/autofac-mobile.mdx",sourceDirName:"snippets",slug:"/snippets/autofac-mobile",permalink:"/docs/snippets/autofac-mobile",draft:!1,unlisted:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/snippets/autofac-mobile.mdx",tags:[],version:"current",frontMatter:{}},c={},l=[];function d(e){const n={a:"a",admonition:"admonition",p:"p",...(0,r.M)(),...e.components};return(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsxs)(n.p,{children:["VertiGIS Studio Mobile uses ",(0,i.jsx)(n.a,{href:"https://autofaccn.readthedocs.io/en/latest/index.html",children:"Autofac"})," to register, locate, and inject components, services and other classes. See ",(0,i.jsx)(n.a,{href:"/docs/mobile/sdk-dependency-injection",children:"dependency injection"})," for more info."]})})}function u(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},5388:(e,n,t)=>{t.d(n,{c:()=>o});t(1504);var i=t(4064);const r={tabItem:"tabItem_Ymn6"};var s=t(7624);function o({children:e,hidden:n,className:t}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,i.c)(r.tabItem,t),hidden:n,children:e})}},1268:(e,n,t)=>{t.d(n,{c:()=>y});var i=t(1504),r=t(4064),s=t(3943),o=t(5592),a=t(5288),c=t(632),l=t(7128),d=t(1148);function u(e){return i.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,i.useMemo)((()=>{const e=n??function(e){return u(e).map((({props:{value:e,label:n,attributes:t,default:i}})=>({value:e,label:n,attributes:t,default:i})))}(t);return function(e){const n=(0,l.w)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m({value:e,tabValues:n}){return n.some((n=>n.value===e))}function h({queryString:e=!1,groupId:n}){const t=(0,o.Uz)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c._M)(r),(0,i.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})}),[r,t])]}function v(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,s=p(e),[o,c]=(0,i.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s}))),[l,u]=h({queryString:t,groupId:r}),[v,g]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,d.IN)(n);return[t,(0,i.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:r}),f=(()=>{const e=l??v;return m({value:e,tabValues:s})?e:null})();(0,a.c)((()=>{f&&c(f)}),[f]);return{selectedValue:o,selectValue:(0,i.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),g(e)}),[u,g,s]),tabValues:s}}var g=t(3664);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=t(7624);function x({className:e,block:n,selectedValue:t,selectValue:i,tabValues:o}){const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.MV)(),l=e=>{const n=e.currentTarget,r=a.indexOf(n),s=o[r].value;s!==t&&(c(n),i(s))},d=e=>{let n=null;switch(e.key){case"Enter":l(e);break;case"ArrowRight":{const t=a.indexOf(e.currentTarget)+1;n=a[t]??a[0];break}case"ArrowLeft":{const t=a.indexOf(e.currentTarget)-1;n=a[t]??a[a.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.c)("tabs",{"tabs--block":n},e),children:o.map((({value:e,label:n,attributes:i})=>(0,b.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>a.push(e),onKeyDown:d,onClick:l,...i,className:(0,r.c)("tabs__item",f.tabItem,i?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function S({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===t));return e?(0,i.cloneElement)(e,{className:"margin-top--md"}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,i.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function j(e){const n=v(e);return(0,b.jsxs)("div",{className:(0,r.c)("tabs-container",f.tabList),children:[(0,b.jsx)(x,{...e,...n}),(0,b.jsx)(S,{...e,...n})]})}function y(e){const n=(0,g.c)();return(0,b.jsx)(j,{...e,children:u(e.children)},String(n))}},7528:(e,n,t)=>{t.d(n,{c:()=>a});var i=t(867),r=(t(1504),t(4971));const s={root:"root_Uwqo"};var o=t(7624);function a({title:e,description:n,link:t}){return(0,o.jsx)("div",{className:(0,r.c)("card-demo",s.root),children:(0,o.jsxs)("div",{className:"card",children:[(0,o.jsx)("div",{className:"card__header",children:(0,o.jsx)("h3",{children:e})}),(0,o.jsx)("div",{className:"card__body",children:(0,o.jsx)("p",{children:n})}),(0,o.jsx)("div",{className:"card__footer",children:(0,o.jsx)(i.c,{className:"button button--secondary button--block",to:t,children:"Get Started"})})]})})}},7160:(e,n,t)=>{t.d(n,{c:()=>s});t(1504);const i={root:"root_vxd5"};var r=t(7624);function s({children:e}){return(0,r.jsx)("div",{className:i.root,children:e})}},4971:(e,n,t)=>{function i(e){var n,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=i(e[n]))&&(r&&(r+=" "),r+=t);else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}t.d(n,{c:()=>r});const r=function(){for(var e,n,t=0,r="";t<arguments.length;)(e=arguments[t++])&&(n=i(e))&&(r&&(r+=" "),r+=n);return r}},2172:(e,n,t)=>{t.d(n,{I:()=>a,M:()=>o});var i=t(1504);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);