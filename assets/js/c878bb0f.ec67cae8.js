"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[7077],{5911:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>p,default:()=>f,frontMatter:()=>d,metadata:()=>u,toc:()=>h});var o=t(4848),r=t(8453),a=t(6025),i=t(1470),l=t(9365),s=t(9389),c=t(556);const d={title:"Create a Component",description:"VertiGIS Studio Web - Create a component for VertiGIS Studio Web"},p=void 0,u={id:"web/sdk-components-create",title:"Create a Component",description:"VertiGIS Studio Web - Create a component for VertiGIS Studio Web",source:"@site/docs/web/sdk-components-create.mdx",sourceDirName:"web",slug:"/web/sdk-components-create",permalink:"/docs/web/sdk-components-create",draft:!1,unlisted:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/web/sdk-components-create.mdx",tags:[],version:"current",frontMatter:{title:"Create a Component",description:"VertiGIS Studio Web - Create a component for VertiGIS Studio Web"},sidebar:"web",previous:{title:"Overview",permalink:"/docs/web/sdk-components-overview"},next:{title:"Component Reference",permalink:"/docs/web/sdk-components-reference"}},m={},h=[{value:"Create the Component",id:"create-the-component",level:2},{value:"Create the Component Model",id:"create-the-component-model",level:2},{value:"Register the Component",id:"register-the-component",level:2},{value:"Add the Component to your Layout",id:"add-the-component-to-your-layout",level:2},{value:"Next Steps",id:"next-steps",level:2}];function x(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.a,{href:"/docs/web/sdk-overview",children:"VertiGIS Studio Web SDK"})," project template includes an example of a ",(0,o.jsx)(n.a,{href:"/docs/web/sdk-components-create",children:"custom component"})," following our best practices. Creating a new custom component involves a few important steps:"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#create-the-component",children:"Create the component source file"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#create-the-component-model",children:"Create the component model"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"#register-the-component",children:"Register the component and component model in your library registration file"})}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"create-the-component",children:"Create the Component"}),"\n",(0,o.jsxs)(n.p,{children:["Create the component source file in a new folder within the ",(0,o.jsx)(n.code,{children:"src/components"})," folder. For example to create a new component called ",(0,o.jsx)(n.code,{children:"ExampleComponent"}),", create a new file called ",(0,o.jsx)(n.code,{children:"ExampleComponent.tsx"})," in ",(0,o.jsx)(n.code,{children:"src/components/ExampleComponent"})," with the following content:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-tsx",metastring:'title="src/components/ExampleComponent/ExampleComponent.tsx"',children:'import {\n    LayoutElement,\n    LayoutElementProperties,\n} from "@vertigis/web/components";\nimport React from "react";\n\n// We will create this model in the next step.\nimport ExampleComponentModel from "./ExampleComponentModel";\n\nconst ExampleComponent = (\n    props: LayoutElementProperties<ExampleComponentModel>\n) => {\n    const { model } = props;\n\n    return (\n        <LayoutElement {...props}>\n            <p>{model.exampleValue}</p>\n        </LayoutElement>\n    );\n};\n\nexport default ExampleComponent;\n'})}),"\n",(0,o.jsx)(n.h2,{id:"create-the-component-model",children:"Create the Component Model"}),"\n",(0,o.jsxs)(n.p,{children:["Next we need to create the ",(0,o.jsx)(n.a,{href:"/docs/web/sdk-components-reference#models",children:"component model"})," that will be bound to the component we just created. This model will function as the underlying data source for the component."]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsx)(n.p,{children:"It's best practice to use the model to define configurable or persistent state, and use the React state hooks for UI specific transient state, like an active selection."})}),"\n",(0,o.jsxs)(n.p,{children:["Create a new file called ",(0,o.jsx)(n.code,{children:"ExampleComponentModel.ts"})," in ",(0,o.jsx)(n.code,{children:"src/components/ExampleComponent"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="src/components/ExampleComponent/ExampleComponentModel.ts"',children:'import {\n    ComponentModelBase,\n    ComponentModelProperties,\n    serializable,\n    PropertyDefs,\n} from "@vertigis/web/models";\n\ninterface ExampleComponentModelProperties\n    extends ComponentModelProperties {\n    exampleValue?: string;\n}\n\n// The serializable decorator marks this class as being serializable\n// so it can be serialized to/from the app.json configuration of\n// your app.\n@serializable\nexport default class ExampleComponentModel extends ComponentModelBase<ExampleComponentModelProperties> {\n    exampleValue: string;\n\n    // This method defines how the model will be serialized and deserialized into\n    // an app item. We override it to include our new property `exampleValue`.\n    protected _getSerializableProperties(): PropertyDefs<ExampleComponentModelProperties> {\n        const props = super._getSerializableProperties();\n        return {\n            ...props,\n            exampleValue: {\n                serializeModes: ["initial"],\n                default: "Default Value",\n            },\n        };\n    }\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"register-the-component",children:"Register the Component"}),"\n",(0,o.jsx)(n.p,{children:"Finally we need to register the component and component model with the VertiGIS Studio Web component registry so that it is aware of your new component."}),"\n",(0,o.jsxs)(n.p,{children:["To simplify the module imports, we'll make a new file in the ",(0,o.jsx)(n.code,{children:"ExampleComponent"})," folder called ",(0,o.jsx)(n.code,{children:"index.ts"}),". Note that this file is for convenience, and is not required:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="src/components/ExampleComponent/index.ts"',children:'export { default } from "./ExampleComponent";\nexport { default as ExampleComponentModel } from "./ExampleComponentModel";\n'})}),"\n",(0,o.jsxs)(n.p,{children:["Now register your component and component model with the component registry by modifying the ",(0,o.jsx)(n.code,{children:"src/index.ts"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",metastring:'title="src/index.ts"',children:'import { LibraryRegistry } from "@vertigis/web/config";\n\n// highlight-start\nimport ExampleComponent, {\n    ExampleComponentModel,\n} from "./components/ExampleComponent";\n// highlight-end\n\n// This namespace is generated when you create your project\n// and will be unique to your library.\nconst LAYOUT_NAMESPACE = "custom.abc123";\n\nexport default function (registry: LibraryRegistry) {\n    // ... other item registrations\n\n    // highlight-start\n    registry.registerComponent({\n        name: "example",\n        namespace: LAYOUT_NAMESPACE,\n        getComponentType: () => ExampleComponent,\n        itemType: "example-model",\n        title: "Example Component",\n    });\n    registry.registerModel({\n        getModel: (config) => new ExampleComponentModel(config),\n        itemType: "example-model",\n    });\n    // highlight-end\n}\n'})}),"\n",(0,o.jsx)(n.h2,{id:"add-the-component-to-your-layout",children:"Add the Component to your Layout"}),"\n",(0,o.jsxs)(n.p,{children:["You can now add the component to your ",(0,o.jsx)(n.code,{children:"layout.xml"})," file and run the development server to see it in use."]}),"\n",(0,o.jsxs)(i.A,{defaultValue:"layout",values:[{label:"Layout",value:"layout"},{label:"UI",value:"ui"}],children:[(0,o.jsx)(l.A,{value:"layout",children:(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-xml",metastring:'title="app/layout.xml"',children:'<?xml version="1.0" encoding="UTF-8"?>\n<layout xmlns="https://geocortex.com/layout/v1" xmlns:custom="custom.abc123">\n    <custom:example margin="3"/>\n</layout>\n'})})}),(0,o.jsx)(l.A,{value:"ui",children:(0,o.jsx)("img",{src:(0,a.A)("img/web-sdk-components-create.png")})})]}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(c.A,{children:[(0,o.jsx)(s.A,{title:"Check out the Component Reference",description:"Take a deep dive into components in the VertiGIS Studio Web SDK",link:(0,a.A)("docs/web/sdk-components-reference")}),(0,o.jsx)(s.A,{title:"Deploy your Component",description:"Learn how to deploy your custom component.",link:(0,a.A)("docs/web/sdk-deployment")}),(0,o.jsx)(s.A,{title:"Create a Component with a Complex UI",description:"Follow along with a more in depth component example",link:(0,a.A)("docs/web/tutorial-implement-component-with-ui")}),(0,o.jsx)(s.A,{title:"Create a Component that Consumes App Config",description:"Learn more about writing components that consume configuration values.",link:(0,a.A)("docs/web/tutorial-implement-component-participate-app-config")})]})]})}function f(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(x,{...e})}):x(e)}},9365:(e,n,t)=>{t.d(n,{A:()=>i});t(6540);var o=t(8215);const r={tabItem:"tabItem_Ymn6"};var a=t(4848);function i({children:e,hidden:n,className:t}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,o.A)(r.tabItem,t),hidden:n,children:e})}},1470:(e,n,t)=>{t.d(n,{A:()=>w});var o=t(6540),r=t(8215),a=t(3104),i=t(6347),l=t(205),s=t(7485),c=t(1682),d=t(9466);function p(e){return o.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,o.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,o.useMemo)((()=>{const e=n??function(e){return p(e).map((({props:{value:e,label:n,attributes:t,default:o}})=>({value:e,label:n,attributes:t,default:o})))}(t);return function(e){const n=(0,c.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m({value:e,tabValues:n}){return n.some((n=>n.value===e))}function h({queryString:e=!1,groupId:n}){const t=(0,i.W6)(),r=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,s.aZ)(r),(0,o.useCallback)((e=>{if(!r)return;const n=new URLSearchParams(t.location.search);n.set(r,e),t.replace({...t.location,search:n.toString()})}),[r,t])]}function x(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,a=u(e),[i,s]=(0,o.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:a}))),[c,p]=h({queryString:t,groupId:r}),[x,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,r]=(0,d.Dv)(n);return[t,(0,o.useCallback)((e=>{n&&r.set(e)}),[n,r])]}({groupId:r}),b=(()=>{const e=c??x;return m({value:e,tabValues:a})?e:null})();(0,l.A)((()=>{b&&s(b)}),[b]);return{selectedValue:i,selectValue:(0,o.useCallback)((e=>{if(!m({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);s(e),p(e),f(e)}),[p,f,a]),tabValues:a}}var f=t(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=t(4848);function v({className:e,block:n,selectedValue:t,selectValue:o,tabValues:i}){const l=[],{blockElementScrollPositionUntilNextRender:s}=(0,a.a_)(),c=e=>{const n=e.currentTarget,r=l.indexOf(n),a=i[r].value;a!==t&&(s(n),o(a))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":n},e),children:i.map((({value:e,label:n,attributes:o})=>(0,g.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>l.push(e),onKeyDown:d,onClick:c,...o,className:(0,r.A)("tabs__item",b.tabItem,o?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function y({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===t));return e?(0,o.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function C(e){const n=x(e);return(0,g.jsxs)("div",{className:(0,r.A)("tabs-container",b.tabList),children:[(0,g.jsx)(v,{...e,...n}),(0,g.jsx)(y,{...e,...n})]})}function w(e){const n=(0,f.A)();return(0,g.jsx)(C,{...e,children:p(e.children)},String(n))}},9389:(e,n,t)=>{t.d(n,{A:()=>l});var o=t(8774),r=(t(6540),t(53));const a={root:"root_Uwqo"};var i=t(4848);function l({title:e,description:n,link:t}){return(0,i.jsx)("div",{className:(0,r.A)("card-demo",a.root),children:(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("div",{className:"card__header",children:(0,i.jsx)("h3",{children:e})}),(0,i.jsx)("div",{className:"card__body",children:(0,i.jsx)("p",{children:n})}),(0,i.jsx)("div",{className:"card__footer",children:(0,i.jsx)(o.A,{className:"button button--secondary button--block",to:t,children:"Get Started"})})]})})}},556:(e,n,t)=>{t.d(n,{A:()=>a});t(6540);const o={root:"root_vxd5"};var r=t(4848);function a({children:e}){return(0,r.jsx)("div",{className:o.root,children:e})}},53:(e,n,t)=>{function o(e){var n,t,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=o(e[n]))&&(r&&(r+=" "),r+=t);else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}t.d(n,{A:()=>r});const r=function(){for(var e,n,t=0,r="";t<arguments.length;)(e=arguments[t++])&&(n=o(e))&&(r&&(r+=" "),r+=n);return r}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var o=t(6540);const r={},a=o.createContext(r);function i(e){const n=o.useContext(a);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(a.Provider,{value:n},e.children)}}}]);