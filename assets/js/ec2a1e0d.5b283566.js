"use strict";(globalThis.webpackChunkvertigis_studio_dev_center=globalThis.webpackChunkvertigis_studio_dev_center||[]).push([[5618],{5728:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>r,toc:()=>c});var n=i(4848),t=i(8453);const o={title:"Memory Management",description:"VertiGIS Studio Mobile - Learn about memory management in VertiGIS Studio Mobile"},a=void 0,r={id:"mobile/sdk-memory-leaks",title:"Memory Management",description:"VertiGIS Studio Mobile - Learn about memory management in VertiGIS Studio Mobile",source:"@site/docs/mobile/sdk-memory-leaks.mdx",sourceDirName:"mobile",slug:"/mobile/sdk-memory-leaks",permalink:"/docs/mobile/sdk-memory-leaks",draft:!1,unlisted:!1,editUrl:"https://github.com/vertigis/studio-dev-center/edit/master/docs/mobile/sdk-memory-leaks.mdx",tags:[],version:"current",frontMatter:{title:"Memory Management",description:"VertiGIS Studio Mobile - Learn about memory management in VertiGIS Studio Mobile"},sidebar:"mobile",previous:{title:"Internationalization",permalink:"/docs/mobile/sdk-internationalization"},next:{title:"Build a Custom Command",permalink:"/docs/mobile/tutorial-implement-command-operation"}},l={},c=[{value:"Using Mobile&#39;s IDisposableTracker Interface",id:"using-mobiles-idisposabletracker-interface",level:2},{value:"Relevant SDK Sample",id:"relevant-sdk-sample",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["It is important to ensure that unmanaged resources are released when they are no longer required, in order to avoid creating memory leaks. This is accomplished using the ",(0,n.jsx)(s.code,{children:"IDisposable"})," interface.\nIf a class creates unmanaged resources, or creates instances of classes which implement ",(0,n.jsx)(s.code,{children:"IDisposable"})," themselves, it should implement ",(0,n.jsx)(s.code,{children:"IDisposable"})," and release these resources in the ",(0,n.jsx)(s.code,{children:"Dispose()"})," method. Detailed information on how to implement ",(0,n.jsx)(s.code,{children:"Dispose()"})," can be found in ",(0,n.jsx)(s.a,{href:"https://docs.microsoft.com/en-us/dotnet/standard/garbage-collection/implementing-dispose",children:"Microsoft's documentation, here"}),"."]}),"\n",(0,n.jsx)(s.admonition,{type:"note",children:(0,n.jsxs)(s.p,{children:["Classes instantiated via ",(0,n.jsx)(s.a,{href:"/docs/mobile/sdk-dependency-injection",children:"dependency injection"})," that implement ",(0,n.jsx)(s.code,{children:"IDisposable"})," will automatically have ",(0,n.jsx)(s.code,{children:"Dispose()"})," called by Autofac once their lifetime scope has ended, so ",(0,n.jsx)(s.code,{children:"Dispose()"})," does not need to be called explicitly for such classes."]})}),"\n",(0,n.jsx)(s.h2,{id:"using-mobiles-idisposabletracker-interface",children:"Using Mobile's IDisposableTracker Interface"}),"\n",(0,n.jsxs)(s.p,{children:["Mobile's toolkit also includes a helpful interface and extension methods to make tracking disposable resources easier: ",(0,n.jsx)(s.code,{children:"IDisposableTracker"})," and ",(0,n.jsx)(s.code,{children:"DisposableUtilities"}),".\n",(0,n.jsx)(s.code,{children:"ComponentBase"})," and ",(0,n.jsx)(s.code,{children:"ServiceBase"})," already implement ",(0,n.jsx)(s.code,{children:"IDisposableTracker"}),", so any custom components or services extending these base classes can take advantage of this functionality right away.\nHere is a brief example of how to use it in a new class:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-cs",children:"public class DisposableTrackerExample: IDisposableTracker, IDisposable\n{\n\t// Implement the IDisposableTracker interface\n\tpublic IList<IDisposable> Disposables => new List<IDisposable>();\n\n\tpublic DisposableTrackerExample()\n\t{\n\t\t// Pointer to a fictitious external unmanaged resource.\n\t\tSafeFileHandle handle = new SafeFileHandle(IntPtr.Zero, true);\n\n\t\t// Track the file handle in the Disposables list\n\t\tDisposables.Add(handle);\n\t}\n\n\tpublic void Dispose()\n\t{\n\t\t// This will dispose of the FileSafeHandle created in the constructor\n\t\tthis.DisposeTrackers();\n\t}\n}\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Using ",(0,n.jsx)(s.code,{children:"DisposeTrackers()"})," is a shortcut which is functionally identical to calling ",(0,n.jsx)(s.code,{children:"Dispose()"})," on each ",(0,n.jsx)(s.code,{children:"IDisposable"})," in the ",(0,n.jsx)(s.code,{children:"Disposables"})," list."]}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"IDisposableTracker"})," is also used when registering commands and operations, as described ",(0,n.jsx)(s.a,{href:"/docs/mobile/sdk-commands-operations#direct-registration-and-implementation",children:"here"}),", and subscribing to events, described ",(0,n.jsx)(s.a,{href:"/docs/mobile/sdk-events-reference#subscribing-to-events",children:"here"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"relevant-sdk-sample",children:"Relevant SDK Sample"}),"\n",(0,n.jsxs)(s.p,{children:["Check out the sample on the ",(0,n.jsx)(s.a,{href:"https://github.com/vertigis/vertigis-mobile-samples/tree/master/Geocortex.Mobile.Samples/Geocortex.Mobile.Samples/Samples/Conceptual/Disposal",children:"disposal pattern in VertiGIS Studio Mobile"}),"."]})]})}function m(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>a,x:()=>r});var n=i(6540);const t={},o=n.createContext(t);function a(e){const s=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(o.Provider,{value:s},e.children)}}}]);