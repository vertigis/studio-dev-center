<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.1">
<title data-rh="true">Mobile Generic Event Listener | VertiGIS Studio Developer Center</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://developers.vertigisstudio.com/img/og-image.png"><meta data-rh="true" name="twitter:image" content="https://developers.vertigisstudio.com/img/og-image.png"><meta data-rh="true" property="og:url" content="https://developers.vertigisstudio.com/blog/2023/03/01/mobile-generic-event-listener"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Mobile Generic Event Listener | VertiGIS Studio Developer Center"><meta data-rh="true" name="description" content="VertiGIS Studio Mobile 5.22 includes an exciting new capability for working with commands, operations, and events. This capability allows app authors to execute custom, configured actions in response to events raised in Mobile. To opt in to this behavior, app authors register an event listener (subscriber) for any given Mobile event. When this event is raised in Mobile, the corresponding configured command or operation is invoked."><meta data-rh="true" property="og:description" content="VertiGIS Studio Mobile 5.22 includes an exciting new capability for working with commands, operations, and events. This capability allows app authors to execute custom, configured actions in response to events raised in Mobile. To opt in to this behavior, app authors register an event listener (subscriber) for any given Mobile event. When this event is raised in Mobile, the corresponding configured command or operation is invoked."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2023-03-01T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/kewalker"><meta data-rh="true" property="article:tag" content="mobile,workflow"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://developers.vertigisstudio.com/blog/2023/03/01/mobile-generic-event-listener"><link data-rh="true" rel="alternate" href="https://developers.vertigisstudio.com/blog/2023/03/01/mobile-generic-event-listener" hreflang="en"><link data-rh="true" rel="alternate" href="https://developers.vertigisstudio.com/blog/2023/03/01/mobile-generic-event-listener" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","@id":"https://developers.vertigisstudio.com/blog/2023/03/01/mobile-generic-event-listener","mainEntityOfPage":"https://developers.vertigisstudio.com/blog/2023/03/01/mobile-generic-event-listener","url":"https://developers.vertigisstudio.com/blog/2023/03/01/mobile-generic-event-listener","headline":"Mobile Generic Event Listener","name":"Mobile Generic Event Listener","description":"VertiGIS Studio Mobile 5.22 includes an exciting new capability for working with commands, operations, and events. This capability allows app authors to execute custom, configured actions in response to events raised in Mobile. To opt in to this behavior, app authors register an event listener (subscriber) for any given Mobile event. When this event is raised in Mobile, the corresponding configured command or operation is invoked.","datePublished":"2023-03-01T00:00:00.000Z","author":{"@type":"Person","name":"Kenneth Walker","description":"Software Developer","url":"https://github.com/kewalker","image":"https://github.com/kewalker.png"},"keywords":[],"isPartOf":{"@type":"Blog","@id":"https://developers.vertigisstudio.com/blog","name":"Blog"}}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="VertiGIS Studio Developer Center RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="VertiGIS Studio Developer Center Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2ZXTZT5M0F"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2ZXTZT5M0F",{anonymize_ip:!0})</script>


<link rel="search" type="application/opensearchdescription+xml" title="VertiGIS Studio Developer Center" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.4b1a9f9b.css">
<script src="/assets/js/runtime~main.88cf53db.js" defer="defer"></script>
<script src="/assets/js/main.900f8b19.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/vertigis-studio.svg" alt="VertiGIS Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/vertigis-studio.svg" alt="VertiGIS Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Developer Center</b></a><a class="navbar__item navbar__link" href="/docs/web/overview">Web</a><a class="navbar__item navbar__link" href="/docs/mobile/overview">Mobile</a><a class="navbar__item navbar__link" href="/docs/workflow/overview">Workflow</a><a class="navbar__item navbar__link" href="/docs/reporting/overview">Reporting</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2023/06/20/inline-sdk">Creating Custom Bands with the Inline SDK</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/blog/2023/03/01/mobile-generic-event-listener">Mobile Generic Event Listener</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/blog/2021/03/22/new-workflow-element-api">New Workflow Form Element API</a></li></ul></nav></aside><main class="col col--7"><article><header><h1 class="title_f1Hy">Mobile Generic Event Listener</h1><div class="container_mt6G margin-vert--md"><time datetime="2023-03-01T00:00:00.000Z">March 1, 2023</time> · <!-- -->8 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/kewalker" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/kewalker.png" alt="Kenneth Walker"></a><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/kewalker" target="_blank" rel="noopener noreferrer"><span>Kenneth Walker</span></a></div><small class="avatar__subtitle">Software Developer</small></div></div></div></div></header><div id="__blog-post-container" class="markdown"><p>VertiGIS Studio Mobile <code>5.22</code> includes an exciting new capability for working with commands, operations, and events. This capability allows app authors to execute custom, configured actions in response to events raised in Mobile. To opt in to this behavior, app authors register an event listener (subscriber) for any given Mobile event. When this event is raised in Mobile, the corresponding configured command or operation is invoked.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>To use these new features, you will need a <code>5.22+</code> version of VertiGIS Studio Mobile.</p></div></div>
<p>The new events capability can be exercised in a few ways:</p>
<ul>
<li><a href="#register-a-listener">Registering an event listener and action</a></li>
<li><a href="#command-chaining">Command chaining</a></li>
<li><a href="#specify-a-sender">Specifying a sender</a></li>
<li><a href="#workflows-and-context">Workflow and context</a></li>
<li><a href="#raise-custom-events">Raise custom event</a></li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Want a complete list of events?</div><div class="admonitionContent_BuS1"><p>Check out the <a href="https://developers.vertigisstudio.com/docs/mobile/api-events#events" target="_blank" rel="noopener noreferrer">Events</a> for the complete list of eligible events that can be listened to.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="register-a-listener">Register a Listener<a href="#register-a-listener" class="hash-link" aria-label="Direct link to Register a Listener" title="Direct link to Register a Listener">​</a></h2>
<p>To get started, you&#x27;ll want to introduce a new item <code>$type</code> into your <code>app.json</code> configuration: the <code>event-listener</code>. Today, you&#x27;ll need to manually configure this app item and any respective listeners. Support for configuring listeners through Designer will be coming soon.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;custom-event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;listeners&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // ... to be populated with listeners ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="wire-up-a-new-listener">Wire up a new <code>Listener</code><a href="#wire-up-a-new-listener" class="hash-link" aria-label="Direct link to wire-up-a-new-listener" title="Direct link to wire-up-a-new-listener">​</a></h3>
<p>With the new <code>event-listener</code> app item, you register a listener to a given event and respond with a configured action. Below, we&#x27;re taking advantage of the <a href="https://developers.vertigisstudio.com/docs/mobile/api-events/#event-map.viewpoint-changed" target="_blank" rel="noopener noreferrer">map.viewpoint-changed</a> event. In particular, it&#x27;s configured with the <a href="https://developers.vertigisstudio.com/docs/mobile/api-commands-operations#command-highlights.clear" target="_blank" rel="noopener noreferrer">highlights.clear</a> command. When you pan the map, the <code>map.viewpoint-changed</code> event is raised, and in turn, our <code>highlights.clear</code> command is executed. No more highlights when we pan!</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;custom-event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;listeners&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;event&quot;: &quot;map.viewpoint-changed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: &quot;highlights.clear&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // ... more listeners ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Of course, multiple listeners may be registered. They can listen to both distinct or duplicate events:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;custom-event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;listeners&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;event&quot;: &quot;map.viewpoint-changed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: &quot;highlights.clear&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;event&quot;: &quot;map.viewpoint-changed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: &quot;highlights.clear-focus&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;event&quot;: &quot;layers.visibility-changed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: &quot;log-viewer.display&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // ... more listeners ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>Warning</div><div class="admonitionContent_BuS1"><p>The event listener capability is only available after the map has begun initializing. Listeners for events that fire <em>before</em> the <code>map.initializing</code> event will not trigger any actions.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="command-chaining">Command Chaining<a href="#command-chaining" class="hash-link" aria-label="Direct link to Command Chaining" title="Direct link to Command Chaining">​</a></h2>
<p>We can pair event listening with <a href="https://developers.vertigisstudio.com/docs/mobile/configuration-commands-operations/#command-chains" target="_blank" rel="noopener noreferrer">Command Chains</a> to react with multiple actions chained together. In the example below, we&#x27;ll react to a map pan by both clearing highlights and closing the panel. Notice that we can mix the use of simple syntax with the dictionary syntax that can optionally provide arguments.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;custom-event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;listeners&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;event&quot;: &quot;map.viewpoint-changed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;highlights.clear&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;name&quot;: &quot;panel.close-host-panel&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;arguments&quot;: {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // ... more listeners ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="specify-a-sender">Specify A Sender<a href="#specify-a-sender" class="hash-link" aria-label="Direct link to Specify A Sender" title="Direct link to Specify A Sender">​</a></h2>
<p>Use the <code>sender</code> property to configure the listener such that it <strong>only</strong> reacts to those events that originate from the specified sender. A sender could correspond to a given component or service. Specifying the sender is optional.</p>
<p>Take the example below where two <code>map-extension</code>s are configured. Since <code>sender</code> is specified as &quot;map-config-1&quot;, viewpoint changed events raised from this map will result in highlights being cleared. Viewpoint changed events raised from &quot;map-config-2&quot; are effectively ignored.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;map-extension&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;map-config-1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;webMap&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx1&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;map-extension&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;map-config-2&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;webMap&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx2&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;custom-event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;listeners&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;event&quot;: &quot;map.viewpoint-changed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;sender&quot;: &quot;item://map-extension/map-config-1&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: [&quot;highlights.clear&quot;]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // ... more listeners ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If the <code>sender</code> is omitted, any instance of the raised event will trigger the configured action.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflows-and-context">Workflows and Context<a href="#workflows-and-context" class="hash-link" aria-label="Direct link to Workflows and Context" title="Direct link to Workflows and Context">​</a></h2>
<p>Using this new capability, you can also configure a Studio Workflow as an action to invoke in response to an event being raised.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>Want to learn more about Studio Workflow?</div><div class="admonitionContent_BuS1"><p>Check out the overview to learn more about <a href="https://developers.vertigisstudio.com/docs/workflow/overview" target="_blank" rel="noopener noreferrer">Studio Workflow</a>.</p></div></div>
<p>Below, we&#x27;ll configure a <a href="https://developers.vertigisstudio.com/docs/mobile/api-commands-operations#command-workflow.run" target="_blank" rel="noopener noreferrer">workflow.run</a> action and listen to a <a href="https://developers.vertigisstudio.com/docs/mobile/api-events#event-layers.visibility-changed" target="_blank" rel="noopener noreferrer">layers.visibility-changed</a> event. Notice that we can specify arguments for our action, which in this case, will be the <code>id</code> of a <code>$type: &quot;workflow&quot;</code> item in <code>app.json</code> configuration.</p>
<p>In this example, toggling an entry in the layer list will invoke the configured workflow.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;custom-event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;listeners&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;event&quot;: &quot;layers.visibility-changed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;name&quot;: &quot;workflow.run&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;arguments&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;id&quot;: &quot;visibility-workflow&quot; // this id corresponds to the id of the workflow item that we want to invoke</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // ... more listeners ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // The corresponding Workflow that we want to invoke in response to an event.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;workflow&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;visibility-workflow&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;title&quot;: &quot;My Visibility Workflow&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;target&quot;: &quot;auto&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;portalItem&quot;: &quot;https://www.arcgis.com/sharing/rest/content/items/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;commandArgumentInput&quot;: &quot;context&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">},</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-workflow-with-context">A Workflow with Context<a href="#a-workflow-with-context" class="hash-link" aria-label="Direct link to A Workflow with Context" title="Direct link to A Workflow with Context">​</a></h3>
<p>Running a Workflow is a powerful way to react to events raised during an app session. Pairing a Workflow with the <code>context</code> capability gives us an opportunity to use an input from the event in the Workflow activity.</p>
<p>Notice below that the Workflow item specifies a <code>commandArgumentInput</code> value of <code>context</code>:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;workflow&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;commandArgumentInput&quot;: &quot;context&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">},</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Using the <code>layers.visibility-changed</code> event, we configure a Workflow as an action, being mindful of the <code>commandArgumentInput</code>.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;custom-event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;listeners&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;event&quot;: &quot;layers.visibility-changed&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;name&quot;: &quot;workflow.run&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                &quot;arguments&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                    &quot;id&quot;: &quot;visibility-workflow&quot; // this id corresponds to the id of the workflow item that we want to invoke</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        // ... more listeners ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">},</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">// ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    // The corresponding Workflow that we want to invoke in response to an event.</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;workflow&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;visibility-workflow&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;title&quot;: &quot;My Visibility Workflow&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;target&quot;: &quot;auto&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;portalItem&quot;: &quot;https://www.arcgis.com/sharing/rest/content/items/xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;commandArgumentInput&quot;: &quot;context&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">},</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By specifying the <code>context</code>, we&#x27;re able to retrieve an input value within a Workflow using the <a href="https://docs.vertigisstudio.com/workflow/latest/help/Default.htm#wf5/help/activities/get-workflow-inputs.htm#Get_Workflow_Inputs_Activity" target="_blank" rel="noopener noreferrer">Get Workflow Inputs</a> activity.</p>
<p>In our Workflow, we would want to run <code>Get Workflow Inputs</code> as our first activity to retrieve the input. Once we have the input as an object in our Workflow, we can access the <code>context</code> to start working with the input.</p>
<p>In the case of the <code>layers.visibility-changed</code> event, we&#x27;re able to retrieve and work with the <code>LayerContent</code> as an input to our Workflow. Below is an example of how to access the <code>LayerContent</code> from the <code>context</code> and get at the <code>id</code>, which could then be used in any subsequent activity, for example an alert or a query:</p>
<div class="language-javascript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-javascript codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">$getWorkflowInputs1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">inputs</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">context</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access maybe-class-name">LayerContent</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token method function property-access" style="color:rgb(130, 170, 255)">toString</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Important</div><div class="admonitionContent_BuS1"><p>The value provided to <code>commandArgumentInput</code> and the accessor used within the <code>Get Workflow Inputs</code> activity object <strong>must</strong> match to correctly access an input (i.e. both <code>context</code> in this example).</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="raise-custom-events">Raise Custom Events<a href="#raise-custom-events" class="hash-link" aria-label="Direct link to Raise Custom Events" title="Direct link to Raise Custom Events">​</a></h2>
<p>While Mobile exposes a number of events that may be listened to, there are times where it would be beneficial to respond to events that <em>aren&#x27;t</em> raised out of the box. Fortunately, there are also capabilities that allow app authors to raise custom events.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="raise-event-through-action">Raise Event through Action<a href="#raise-event-through-action" class="hash-link" aria-label="Direct link to Raise Event through Action" title="Direct link to Raise Event through Action">​</a></h3>
<p>Using the new <a href="https://developers.vertigisstudio.com/docs/mobile/api-commands-operations#command-viewer.publish-event" target="_blank" rel="noopener noreferrer">viewer.publish-event</a> command, a custom event can be raised. This action can be configured anywhere in the app that supports actions, like buttons, hooks, command chains, etc. Below is an example of a configured button action:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;action&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;name&quot;: &quot;viewer.publish-event&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;arguments&quot;: {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;name&quot;: &quot;custom.raised-event&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        &quot;arguments&quot;: {}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="raise-event-through-workflow">Raise Event through Workflow<a href="#raise-event-through-workflow" class="hash-link" aria-label="Direct link to Raise Event through Workflow" title="Direct link to Raise Event through Workflow">​</a></h3>
<p>But what if we want to raise a custom event during execution of a Workflow? Using the <a href="https://docs.vertigisstudio.com/workflow/latest/help/Default.htm#wf5/help/activities/publish-event.htm" target="_blank" rel="noopener noreferrer">Publish Event</a> activity, it&#x27;s possible to raise a custom event from anywhere in your Workflow logic. Simply provide the same custom event name to the <code>Event Name</code> input in the <code>Publish Event</code> activity. Arguments may also be provided. For the above example, that would be:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">custom.raised-event</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Although not recommended, it&#x27;s also possible to use the <code>viewer.publish-event</code> command and the <code>Publish Event</code> activity to manually publish well-known Mobile events, i.e. <code>map.viewpoint-changed</code>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="subscribe-to-custom-event">Subscribe to Custom Event<a href="#subscribe-to-custom-event" class="hash-link" aria-label="Direct link to Subscribe to Custom Event" title="Direct link to Subscribe to Custom Event">​</a></h3>
<p>Of course, publishing these events is only one side of the capabilities. Using the same mechanism introduced above, these custom raised events can be listened to, and configured with an action to invoke.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;$type&quot;: &quot;event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;id&quot;: &quot;custom-event-listener&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;listeners&quot;: [</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;event&quot;: &quot;custom.raised-event&quot;,</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            &quot;action&quot;: &quot;...&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Custom events could in turn raise more events with the <code>viewer.publish-event</code>, which could in turn be listened to. Together, the publishing and listening capabilities offer flexibility to respond to custom events with configured actions.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="in-closing">In Closing<a href="#in-closing" class="hash-link" aria-label="Direct link to In Closing" title="Direct link to In Closing">​</a></h2>
<p>We&#x27;re excited to showcase these new capabilities for commands, operations, and events. We hope app authors can take advantage of them to create more responsive and exciting applications. Happy building!</p></div><footer class="docusaurus-mt-lg"><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/mobile">mobile</a></li><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/blog/tags/workflow">workflow</a></li></ul></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/2023/06/20/inline-sdk"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Creating Custom Bands with the Inline SDK</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/2021/03/22/new-workflow-element-api"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">New Workflow Form Element API</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#register-a-listener" class="table-of-contents__link toc-highlight">Register a Listener</a><ul><li><a href="#wire-up-a-new-listener" class="table-of-contents__link toc-highlight">Wire up a new <code>Listener</code></a></li></ul></li><li><a href="#command-chaining" class="table-of-contents__link toc-highlight">Command Chaining</a></li><li><a href="#specify-a-sender" class="table-of-contents__link toc-highlight">Specify A Sender</a></li><li><a href="#workflows-and-context" class="table-of-contents__link toc-highlight">Workflows and Context</a><ul><li><a href="#a-workflow-with-context" class="table-of-contents__link toc-highlight">A Workflow with Context</a></li></ul></li><li><a href="#raise-custom-events" class="table-of-contents__link toc-highlight">Raise Custom Events</a><ul><li><a href="#raise-event-through-action" class="table-of-contents__link toc-highlight">Raise Event through Action</a></li><li><a href="#raise-event-through-workflow" class="table-of-contents__link toc-highlight">Raise Event through Workflow</a></li><li><a href="#subscribe-to-custom-event" class="table-of-contents__link toc-highlight">Subscribe to Custom Event</a></li></ul></li><li><a href="#in-closing" class="table-of-contents__link toc-highlight">In Closing</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">VertiGIS Studio Apps</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://apps.vertigisstudio.com/web/designer/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VertiGIS Studio Web</a></li><li class="footer__item"><a href="https://apps.vertigisstudio.com/mobile/designer/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VertiGIS Studio Mobile</a></li><li class="footer__item"><a href="https://apps.vertigisstudio.com/workflow/designer/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VertiGIS Studio Workflow</a></li><li class="footer__item"><a href="https://apps.vertigisstudio.com/reporting/designer/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VertiGIS Studio Reporting</a></li><li class="footer__item"><a href="https://apps.vertigisstudio.com/printing/designer/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VertiGIS Studio Printing</a></li><li class="footer__item"><a href="https://apps.vertigisstudio.com/inline/designer/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VertiGIS Studio Inline</a></li><li class="footer__item"><a href="https://apps.vertigisstudio.com/itemmanager/" target="_blank" rel="noopener noreferrer" class="footer__link-item">VertiGIS Studio Item Manager</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/vertigis/studio-dev-center" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://docs.vertigisstudio.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">VertiGIS Studio Documentation Center</a></li><li class="footer__item"><a href="https://vertigis.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">VertiGIS.com</a></li></ul></div><div class="col footer__col"><div class="footer__title">Legal</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.vertigisstudio.com/legal/#licensing-terms-of-use" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms</a></li><li class="footer__item"><a href="https://www.vertigisstudio.com/legal/#privacy-statement" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 VertiGIS North America Ltd. All rights reserved.</div></div></div></footer></div>
</body>
</html>